---
title: How does the country a film was made in affect iMDb ratings?
author: Calcutta_Coders
output: github_document
---
Introduction:

Our aim in this project is to find out how iMDb ratings compare for films from different countries. We are using a data set called iMDb movies that has come from kaggle. The data set was originally from the public iMDb website which shows all the ratings and then this was filtered to only films with more than 100 votes. Each case is a different flim for this data set. We will also compare how different variables (title, year published, genre, budget, USA gross income, Worldwide gross income, duration and actors) affect iMDb ratings and also how many votes were cast for a film to recieve said rating. 

Data analysis plan:

The outcome (response, Y) will be the average imdb ratings, The predictor (explanatory, X) will be country. To properly explore these realtionships we will use gross and worlwide income to see if the movie did well worldwide or just in the us, we can also ...

We will use comparison groups such as worldwide gross to see if this film sold well worldwide or just in the US, if it did well worldwide 

## Summary
To start with we will look at the spread of the general ratings on IMDb.
```{r average-rating, echo = FALSE}
imdb %>%
  ggplot(aes(x = avg_vote)) +
  geom_histogram(binwidth = 0.5) +
  labs(
    title = "Distribution of Average Rating",
    x = "Average Rating",
    y = "Frequency"
  ) +
  theme_minimal()
```
From the graph we can see that there is a decently large left skew, showing that most movies are rated above average on IMDb.

Next if we look at the average ratings per country we can start to build up an understanding of how films produced in different countries compare with there average IMDbs ratings.
```{r average-rating-country-table, echo = FALSE}
imdb_country <- imdb %>%
  mutate(country = sub("\\ ", "", country)) %>%
  separate_rows(country, sep = "\\,") %>%
  mutate(country = case_when(
    country == "HongKong" ~ "Hong Kong",
    TRUE ~ country)) %>%
  filter(
     country %in% c("USA", "France", "UK", "India", "Italy", "Germany", "Japan", "Canada", "Spain", "Hong Kong", "Turkey", "Belgium")
   )

imdb_country %>%
  group_by(country) %>%
  summarise(
    mean_rating = mean(avg_vote, na.rm = TRUE),
    median_rating = median(avg_vote, na.rm = TRUE)
    ) %>%
  arrange(desc(mean_rating)) %>%
  gt() %>%
  cols_label(
    country = "Country",
    mean_rating = "Mean Rating",
    median_rating = "Median Rating"
  )
```
From this we can see that Japan and India have by far the highest average rating, with the US and Canada having a considerably lower rating.

Now lets have a look at whether the proportion of US votes impacts the rating of the film? ill pass over to my college Grace.

```{r prop-us-country, echo = FALSE, warning = FALSE}
imdb_country %>%
  ggplot(aes(x = prop_us_votes, y = avg_vote, color = country)) +
  geom_point(alpha = 0.3) +
  stat_smooth(method = "lm", se = FALSE, color = "black") +
  facet_wrap(~country) +
  labs(
    title = "Average Rating vs Proportion of US votes",
    subtitle = "by country",
    x = "Proportion of US votes",
    y = "Average Rating"
  ) +
  theme(legend.position = "none")
```
We are now taking a look at whether the average rating is impacted by the proportion of us voters. Overall, you can see that either the proportion of US voters does not impact the rating, such as for Belgium and Japan, OR a higher proportion of US voters results in a lower rating, such as for Italy and Germany. The USA has a negative association, but this may be because better films will be watched by nonUS users.

This is a linear regression of this relationship. The second line reveals that for all countries, as the proportion of US votes increases by 1, the average rating decreases by 

```{r prop-us-country-regression, echo = FALSE, warning = FALSE}
imdb_prop_us_reg <- linear_reg() %>%
  set_engine("lm") %>%
  fit(us_rating ~ prop_us_votes + country, data = imdb_country)
  tidy(imdb_prop_us_reg)
```

Lets now look at whether these ratings are similar to the US ratiings or not
```{r country-us-rating, echo = FALSE, warning = FALSE}
imdb1990_country <- imdb1990 %>%
  separate_rows(country, sep = "\\,") %>%
  mutate(country = case_when(
    country == "HongKong" ~ "Hong Kong",
    TRUE ~ country
  )) %>%
  filter(
     country %in% c("USA", "France", "UK", "India", "Italy", "Germany", "Japan", "Canada", "Spain", "Hong Kong", "Turkey", "Belgium")
   ) 

imdb1990_country_longer <- imdb1990_country %>%
  pivot_longer(cols = c(us_rating, non_us_rating), names_to = "us_or_not", values_to = "rating")

imdb1990_country_longer %>%
  ggplot(aes(x = rating, fill = us_or_not)) +
  geom_density(alpha = 0.5) +
  facet_wrap(~ country) +
  labs(
    title = "Average Rating by US or non-US users",
    subtitle = "by country",
    x = "Average Rating",
    y = "Density",
    fill = NULL
  ) +
  theme_minimal()
```
Here we can see that the us underrates all of our looked at countries, apart from the UK and Canda both of which are obviously English Speaking. It also interestingly overrates its own films compared to the rest of the world.



This grph displays the distribution of average rating from US users or from non-US users. From the graph again we can see that Japanese films have high ratings from both US and non-US voters, but they do have a slightly higher rating from non-US voters. One reason the Japanese films are rated so highly could be because of the worldwide love of anime. Furthermore if we look at another country not known for this such as Italy we can see large variation between the US voter rating and non-US voter rating with the latter being far higher.We can now look at some different variables which might be able to explain these differences.

Firstly lets see if its the genre of films that the country is producing which is causing the discrepancy's.
To do this lets first see which genres tend to be the worst rated by Americans users.
```{r data-analysis-genre}
imdb1990_genre <- imdb1990 %>%
  mutate(genre = sub("\\ ", "", genre)) %>%
  separate_rows(genre, sep = "\\,") %>%
 mutate(genre = case_when(
    genre == "SciFi" ~ "Sci Fi",
    genre == "FilmNoir" ~ "Film Noir",
    TRUE ~ genre)) %>%
  distinct()

imdb1990_genre %>%
  filter(
    genre %in% c("Drama", "Comedy", "Action", "Horror", "Crime", "Thriller", "Romance", "Adventure", "Mystery", "Family")
  ) %>%
  ggplot(aes(x = us_rating, y = genre, fill = genre)) +
  geom_density_ridges(alpha = 0.5, show.legend = FALSE) +
  labs(
    title = "Distribution of US IMDb Average Rating by Genre",
    x = "Average Rating",
    y = "Genre"
  ) +
  theme_minimal()
```
From this we can see that Animation and Drama are by far the highest rated, followed by Crime, Comedy and action. Finally Horror is byfar the lowest rated out of the common genres.

Now lets see which are the top genres for each country:
- Italy
  1. Drama (28%)
  2. Comedy (26%)
  3. Crime (6.1%)
  4. Horror (3.8%)
- Japan
  1. Drama (18%)
  2. Action (13%)
  3. Animation (13%)
  4. Comedy (8.6%)
- USA
  1. Drama (20%)
  2. Comedy (14%)
  3. Action (8.6%)
  4. Horror (7.4%)
  
  We know that the Horror genre is quite poorly rated by US users so this could explain why films produced in Italy are on the whole not as high rated. Japan has a large percentage of Animation movies which are the highest rated by US users, however we still see that the US rates Japan lower then the rest of the world does, this could suggest that there is a bias against Japenese films in the US.



In conclusion we can see that...




Write-up of your project and findings go here. 
Think of this as the text of your presentation. 
The length should be roughly 5 minutes when read out loud.
Although pacing varies, a 5-minute speech is roughly 750 words. 
To use the word count addin, select the text you want to count the words of (probably this is the 
Summary section of this document, go to Addins, and select the `Word count` addin).
This addin counts words using two different algorithms, but the results should be similar and as long as you're in the ballpark of 750 words, you're good! 
The addin will ignore code chunks and only count the words in prose.

You can also load your data here and present any analysis results / plots, but I strongly urge you to keep that to a minimum (maybe only the most important graphic, if you have one you can choose). 
And make sure to hide your code with  `echo = FALSE` unless the point you are trying to make is about the code itself.
Your results with proper output and graphics go in your presentation, this space is for a brief summary of your project.

```{r load-data, echo = FALSE}
library(tidyverse)
imdb <- read.csv(file = "data/IMDb_movies.csv", header = TRUE, skip = 1)
head(imdb)
```

## Presentation

Our presentation can be found [here](presentation/presentation.html).

## Data 

Include a citation for your data here. 
See http://libraryguides.vu.edu.au/c.php?g=386501&p=4347840 for guidance on proper citation for datasets. 
If you got your data off the web, make sure to note the retrieval date.

## References

List any references here. You should, at a minimum, list your data source.

